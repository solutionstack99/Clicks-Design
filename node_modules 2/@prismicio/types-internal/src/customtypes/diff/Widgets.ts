import type { Group } from "../widgets"
import type { NestableWidget } from "../widgets/nestable"
import type { DiffChange } from "./Changes"

export type NestableWidgetDiff = DiffChange<NestableWidget, NestableWidget>

export type GroupWidgetWithFieldsDiff = Omit<Group, "config"> & {
	config: Omit<Group["config"], "fields"> & {
		// This line may need to be updated if we support groups within
		// groups in the future. The diff code is already recursive and
		// should not need updates; inputs are restricted by types, not
		// by code.
		//
		// Ensure tests are updated accordingly.
		fields?: Record<string, NestableWidgetDiff>
	}
}
export type GroupWidgetDiff = DiffChange<
	GroupWidgetWithFieldsDiff,
	GroupWidgetWithFieldsDiff
>

export type SlicePrimaryWidgetDiff = NestableWidgetDiff | GroupWidgetDiff
